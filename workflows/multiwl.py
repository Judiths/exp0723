#coding = utf-8
from workflows.singlewl import SingleWorkflow


set = ['CyberShake_30.xml', 'Epigenomics_24.xml', 'Inspiral_30.xml',
            'Montage_25.xml', 'Sipht_30.xml']

# C_30 = SingleWorkflow(set[0]).tasks()
# E_24 = SingleWorkflow(set[1]).tasks()
# I_30 = SingleWorkflow(set[2]).tasks()
# M_25 = SingleWorkflow(set[3]).tasks()
# S_30 = SingleWorkflow(set[4]).tasks()

type_dict = {'8M': 0, '16M': 1, '32M': 2}

C_30 = [('ID00000', 'CyberShake', '8M'), ('ID00021', 'CyberShake', '16M'), ('ID00012', 'CyberShake', '16M'),
         ('ID00023', 'CyberShake', '16M'), ('ID00010', 'CyberShake', '16M'), ('ID00025', 'CyberShake', '16M'),
         ('ID00006', 'CyberShake', '16M'), ('ID00017', 'CyberShake', '16M'), ('ID00027', 'CyberShake', '16M'),
         ('ID00004', 'CyberShake', '16M'), ('ID00015', 'CyberShake', '16M'), ('ID00029', 'CyberShake', '16M'),
         ('ID00008', 'CyberShake', '16M'), ('ID00019', 'CyberShake', '16M'), ('ID00020', 'CyberShake', '8M'),
         ('ID00011', 'CyberShake', '8M'), ('ID00022', 'CyberShake', '8M'), ('ID00009', 'CyberShake', '8M'),
         ('ID00024', 'CyberShake', '8M'), ('ID00005', 'CyberShake', '8M'), ('ID00016', 'CyberShake', '8M'),
         ('ID00026', 'CyberShake', '8M'), ('ID00003', 'CyberShake', '8M'), ('ID00014', 'CyberShake', '8M'),
         ('ID00028', 'CyberShake', '8M'), ('ID00007', 'CyberShake', '8M'), ('ID00018', 'CyberShake', '8M'),
         ('ID00001', 'CyberShake', '16M'), ('ID00013', 'CyberShake', '32M'), ('ID00002', 'CyberShake', '32M')]

E_24 = [('ID00000', 'Genome', '8M'), ('ID00001', 'Genome', '16M'), ('ID00002', 'Genome', '16M'),
         ('ID00003', 'Genome', '16M'), ('ID00004', 'Genome', '16M'), ('ID00005', 'Genome', '16M'),
         ('ID00006', 'Genome', '32M'), ('ID00007', 'Genome', '32M'), ('ID00008', 'Genome', '32M'),
         ('ID00009', 'Genome', '32M'), ('ID00010', 'Genome', '32M'), ('ID00011', 'Genome', '8M'),
         ('ID00012', 'Genome', '8M'), ('ID00013', 'Genome', '8M'), ('ID00014', 'Genome', '8M'), ('ID00015', 'Genome', '8M'),
         ('ID00016', 'Genome', '16M'), ('ID00017', 'Genome', '16M'), ('ID00018', 'Genome', '16M'),
         ('ID00019', 'Genome', '16M'), ('ID00020', 'Genome', '16M'), ('ID00021', 'Genome', '32M'),
         ('ID00022', 'Genome', '8M'), ('ID00023', 'Genome', '16M')]

I_30 = [('ID00000', 'LIGO', '8M'), ('ID00007', 'LIGO', '16M'),
         ('ID00014', 'LIGO', '32M'), ('ID00012', 'LIGO', '16M'), ('ID00013', 'LIGO', '16M'), ('ID00010', 'LIGO', '16M'),
         ('ID00011', 'LIGO', '16M'), ('ID00009', 'LIGO', '16M'), ('ID00008', 'LIGO', '16M'), ('ID00015', 'LIGO', '8M'),
         ('ID00016', 'LIGO', '8M'), ('ID00017', 'LIGO', '8M'), ('ID00018', 'LIGO', '8M'), ('ID00019', 'LIGO', '8M'),
         ('ID00020', 'LIGO', '8M'), ('ID00021', 'LIGO', '8M'), ('ID00005', 'LIGO', '8M'), ('ID00006', 'LIGO', '8M'),
         ('ID00003', 'LIGO', '8M'), ('ID00004', 'LIGO', '8M'), ('ID00002', 'LIGO', '8M'), ('ID00001', 'LIGO', '8M'),
         ('ID00022', 'LIGO', '16M'), ('ID00023', 'LIGO', '16M'), ('ID00024', 'LIGO', '16M'), ('ID00025', 'LIGO', '16M'),
         ('ID00026', 'LIGO', '16M'), ('ID00027', 'LIGO', '16M'), ('ID00028', 'LIGO', '16M'), ('ID00029', 'LIGO', '32M')]

M_25 = [('ID00000', 'Montage', '8M'), ('ID00005', 'Montage', '16M'), ('ID00008', 'Montage', '16M'),
         ('ID00010', 'Montage', '16M'), ('ID00016', 'Montage', '16M'), ('ID00002', 'Montage', '8M'),
         ('ID00014', 'Montage', '32M'), ('ID00004', 'Montage', '8M'), ('ID00015', 'Montage', '8M'),
         ('ID00021', 'Montage', '32M'), ('ID00006', 'Montage', '16M'), ('ID00009', 'Montage', '16M'),
         ('ID00011', 'Montage', '16M'), ('ID00018', 'Montage', '16M'), ('ID00012', 'Montage', '16M'),
         ('ID00013', 'Montage', '16M'), ('ID00007', 'Montage', '16M'), ('ID00020', 'Montage', '16M'),
         ('ID00017', 'Montage', '16M'), ('ID00019', 'Montage', '16M'), ('ID00022', 'Montage', '8M'),
         ('ID00001', 'Montage', '8M'), ('ID00003', 'Montage', '8M'), ('ID00023', 'Montage', '16M'),
         ('ID00024', 'Montage', '32M')]

S_30 = [('ID00000', 'SIPHT', '8M'), ('ID00002', 'SIPHT', '16M'),
         ('ID00001', 'SIPHT', '16M'), ('ID00006', 'SIPHT', '16M'), ('ID00005', 'SIPHT', '16M'), ('ID00004', 'SIPHT', '16M'),
         ('ID00003', 'SIPHT', '16M'), ('ID00009', 'SIPHT', '16M'), ('ID00008', 'SIPHT', '16M'), ('ID00007', 'SIPHT', '16M'),
         ('ID00012', 'SIPHT', '16M'), ('ID00013', 'SIPHT', '16M'), ('ID00010', 'SIPHT', '16M'), ('ID00011', 'SIPHT', '16M'),
         ('ID00016', 'SIPHT', '16M'), ('ID00017', 'SIPHT', '16M'), ('ID00014', 'SIPHT', '16M'), ('ID00015', 'SIPHT', '16M'),
         ('ID00028', 'SIPHT', '8M'), ('ID00022', 'SIPHT', '8M'), ('ID00024', 'SIPHT', '32M'), ('ID00025', 'SIPHT', '8M'),
         ('ID00026', 'SIPHT', '16M'), ('ID00027', 'SIPHT', '32M'), ('ID00020', 'SIPHT', '16M'), ('ID00021', 'SIPHT', '32M'),
         ('ID00018', 'SIPHT', '32M'), ('ID00019', 'SIPHT', '8M'), ('ID00023', 'SIPHT', '16M')]

bag_of_tasks = C_30+E_24+I_30+M_25+S_30

y_truth = [[7.234, 14.334, 27.381, 6.994, 14.234, 31.875, 6.524, 13.873, 32.135],
           [7.196, 14.528, 27.521, 7.221, 14.715, 32.225, 6.481, 13.955, 32.005],
           [7.24, 14.449, 27.938, 7.342, 14.928, 32.938, 6.442, 13.924, 31.978],
           [7.237, 14.631, 28.071, 7.451, 14.349, 33.164, 6.468, 13.868, 31.994],
           [7.265, 14.761, 28.205, 7.44, 14.031, 33.505, 6.397, 13.801, 31.785],
           [7.288, 14.692, 28.432, 7.452, 13.821, 33.422, 6.384, 13.795, 31.692],
           [7.28, 14.774, 28.504, 7.501, 13.622, 33.414, 6.373, 13.862, 31.604], [7.301, 14.883, 28.525, 7.684, 13.701, 33.515, 6.382, 13.884, 31.524], [7.294, 14.903, 28.648, 7.773, 13.783, 33.388, 6.293, 13.943, 31.608], [7.317, 15.013, 28.752, 7.771, 13.723, 33.052, 6.172, 14.025, 31.482], [7.33, 15.062, 28.841, 7.969, 13.543, 32.941, 6.153, 14.213, 31.441], [7.327, 15.157, 28.784, 8.342, 13.261, 32.981, 6.144, 14.235, 31.354], [7.329, 15.211, 28.796, 8.558, 13.102, 33.132, 6.004, 14.262, 31.422], [7.319, 15.21, 28.839, 8.737, 13.171, 33.019, 6.217, 14.201, 31.279], [7.328, 15.341, 28.817, 8.76, 12.938, 33.171, 6.06, 14.211, 31.261], [7.337, 15.393, 28.826, 8.689, 12.724, 33.206, 6.124, 14.224, 31.286], [7.344, 15.475, 28.871, 8.829, 12.893, 33.328, 5.949, 14.253, 31.338], [7.349, 15.417, 29.024, 8.791, 12.715, 33.423, 5.781, 14.261, 31.343], [7.348, 15.5, 29.445, 8.905, 12.517, 33.545, 5.723, 14.237, 31.315], [7.341, 15.474, 29.32, 8.884, 12.31, 34.027, 5.824, 14.279, 31.277], [7.437, 15.482, 29.531, 8.907, 12.124, 34.101, 5.843, 14.284, 31.231], [7.426, 15.442, 29.442, 8.782, 12.272, 34.312, 5.792, 14.332, 31.342], [7.445, 15.512, 29.55, 8.801, 12.127, 34.564, 5.791, 14.361, 31.307], [7.431, 15.509, 29.549, 8.872, 12.105, 34.652, 5.785, 14.368, 31.315], [7.432, 15.52, 29.557, 8.851, 12.113, 34.689, 5.793, 14.355, 31.304], [7.451, 15.518, 29.608, 8.964, 12.108, 34.671, 5.784, 14.36, 31.289], [7.446, 15.523, 29.602, 9.014, 12.078, 34.795, 5.772, 14.371, 31.294], [7.455, 15.536, 29.628, 9.151, 12.057, 34.806, 5.77, 14.379, 31.281], [7.451, 15.529, 29.629, 9.12, 12.063, 34.821, 5.683, 14.384, 31.289], [7.459, 15.531, 29.675, 9.213, 12.054, 34.987, 5.69, 14.381, 31.271], [7.462, 15.538, 29.641, 9.201, 12.046, 34.934, 5.671, 14.39, 31.265], [7.463, 15.541, 29.712, 9.187, 12.048, 35.136, 5.652, 14.385, 31.26], [7.461, 15.545, 29.661, 9.175, 12.037, 35.119, 5.653, 14.397, 31.259]]

y_pred = [[7.234, 14.334, 27.381, 6.994, 14.234, 31.875, 6.524, 13.873, 32.135],
          [7.234, 14.334, 27.381, 6.994, 14.234, 31.875, 6.524, 13.873, 32.135],
          [7.21303061, 14.70546435, 27.64686872, 7.396177657, 14.7987407, 32.45013558, 6.509933572, 13.99529466, 31.89303738],
          [7.227523853, 14.50496577, 28.16734307, 7.454698659, 14.98372461, 33.22767195, 6.44164305, 13.91189372, 31.91226491],
          [7.241087519, 14.71346434, 28.25480391, 7.536627468, 14.15471261, 33.33443, 6.462693792, 13.84241063, 31.95328996], [7.259415009, 14.84426766, 28.3628272, 7.471851368, 13.95740793, 33.65595155, 6.41336485, 13.76989614, 31.73121597], [7.286020894, 14.75069537, 28.58074876, 7.469578855, 13.76433955, 33.46270107, 6.378601572, 13.7909484, 31.64327642], [7.281830989, 14.82959017, 28.63268974, 7.525638643, 13.56638058, 33.42845005, 6.377698491, 13.89180126, 31.56094025], [7.297173943, 14.93692949, 28.63618578, 7.758813254, 13.73459019, 33.54513957, 6.378020733, 13.8951536, 31.48676298], [7.296212373, 14.9509836, 28.74824714, 7.835732617, 13.80440927, 33.36954247, 6.311837281, 13.96988985, 31.5742627], [7.312749239, 15.05849842, 28.84216654, 7.796603021, 13.70055831, 32.96365236, 6.185902024, 14.0628728, 31.45549364], [7.329200382, 15.10367204, 28.92206638, 8.049501241, 13.4884459, 32.87871543, 6.149898892, 14.29878541, 31.41873298], [7.32770336, 15.19542268, 28.85826837, 8.507183854, 13.17838988, 32.96556937, 6.147207765, 14.24861386, 31.33791931], [7.328481476, 15.24611808, 28.86386808, 8.703378458, 13.06306232, 33.16215642, 6.029058843, 14.27467949, 31.40349112], [7.320718963, 15.242425, 28.9006148, 8.861036054, 13.1989176, 33.00392107, 6.164419531, 14.17426261, 31.27075596], [7.326088032, 15.36930024, 28.87486296, 8.820120047, 12.85898849, 33.20153878, 6.115225398, 14.21429953, 31.25455658], [7.336146037, 15.41844799, 28.87969698, 8.689195633, 12.66685232, 33.22671831, 6.085172635, 14.22996188, 31.27818409], [7.343151323, 15.49699319, 28.9196112, 8.878410317, 12.95574585, 33.36571897, 6.001006112, 14.26623812, 31.32670765], [7.348463357, 15.43923136, 29.06330815, 8.798331749, 12.64853619, 33.46105771, 5.787819578, 14.26516138, 31.33197228], [7.348313158, 15.51853286, 29.46301821, 8.948241974, 12.46314658, 33.58969653, 5.730730529, 14.22644402, 31.30691434], [7.34200626, 15.49240514, 29.34310823, 8.894734837, 12.25139536, 34.16106815, 5.801072062, 14.29732911, 31.27261236], [7.42165522, 15.499203, 29.54220483, 8.919605723, 12.0728459, 34.17277214, 5.850459018, 14.28704275, 31.23091418], [7.432195925, 15.45988846, 29.45741668, 8.743243269, 12.32711224, 34.39169777, 5.798091414, 14.35361143, 31.33180286], [7.440215633, 15.52629069, 29.55872368, 8.791441417, 12.07226886, 34.6567613, 5.788249002, 14.37492585, 31.30053167], [7.434589122, 15.52279463, 29.55740185, 8.893007968, 12.10599288, 34.7105215, 5.787468561, 14.37174415, 31.30805074], [7.43079739, 15.5327406, 29.5645776, 8.852410721, 12.11542529, 34.72146052, 5.790287696, 14.34934766, 31.29840819], [7.448371468, 15.53032145, 29.61216664, 9.00440657, 12.10603538, 34.67972746, 5.787020042, 14.36198887, 31.2851131], [7.447549855, 15.53461367, 29.60638124, 9.048562257, 12.068646, 34.82837539, 5.772822518, 14.37600938, 31.28976116], [7.453137308, 15.54655696, 29.63055754, 9.213765369, 12.05162789, 34.82207978, 5.769982981, 14.38279976, 31.27824041], [7.452169912, 15.53952657, 29.63140098, 9.135398776, 12.06572029, 34.83108318, 5.699542946, 14.38640425, 31.28551469], [7.457404806, 15.54106208, 29.67426123, 9.252225744, 12.05070611, 35.03103596, 5.680682366, 14.3797633, 31.26951166], [7.461994457, 15.54736337, 29.64258442, 9.213221683, 12.04391377, 34.93895636, 5.679109766, 14.39397272, 31.26419376], [7.462844828, 15.54990239, 29.70865701, 9.187192493, 12.04895031, 35.18664288, 5.651695481, 14.38293732, 31.25975223]]


WL = [[9.0, 6.0, 1.0, 7.0, 3.0, 1.0, 6.0, 5.0, 2.0],
      [3.0, 2.0, 4.0, 4.0, 6.0, 5.0, 1.0, 7.0, 1.0],
      [4.0, 10.0, 6.0, 6.0, 4.0, 7.0, 4.0, 5.0, 6.0],
      [5.0, 7.0, 6.0, 6.0, 8.0, 4.0, 4.0, 9.0, 7.0],
      [8.0, 6.0, 2.0, 2.0, 6.0, 1.0, 6.0, 9.0, 4.0],
      [5.0, 3.0, 1.0, 1.0, 5.0, 9.0, 3.0, 1.0, 6.0], [2.0, 8.0, 10.0, 10.0, 9.0, 2.0, 7.0, 4.0, 2.0], [3.0, 3.0, 1.0, 1.0, 2.0, 6.0, 4.0, 4.0, 5.0], [5.0, 10.0, 1.0, 1.0, 3.0, 7.0, 7.0, 1.0, 6.0], [9.0, 10.0, 7.0, 7.0, 6.0, 5.0, 3.0, 8.0, 5.0], [9.0, 5.0, 1.0, 1.0, 7.0, 4.0, 2.0, 8.0, 1.0], [3.0, 5.0, 4.0, 4.0, 4.0, 2.0, 2.0, 1.0, 2.0], [2.0, 5.0, 3.0, 3.0, 9.0, 2.0, 6.0, 1.0, 2.0], [6.0, 8.0, 9.0, 9.0, 9.0, 6.0, 9.0, 6.0, 5.0], [6.0, 3.0, 3.0, 3.0, 9.0, 1.0, 6.0, 4.0, 7.0], [3.0, 6.0, 4.0, 4.0, 4.0, 9.0, 7.0, 2.0, 4.0], [6.0, 5.0, 1.0, 1.0, 2.0, 3.0, 6.0, 2.0, 7.0], [7.0, 4.0, 4.0, 4.0, 8.0, 8.0, 9.0, 8.0, 8.0], [9.0, 8.0, 2.0, 2.0, 5.0, 4.0, 4.0, 1.0, 1.0], [3.0, 3.0, 5.0, 5.0, 3.0, 5.0, 1.0, 6.0, 6.0], [5.0, 1.0, 7.0, 7.0, 3.0, 7.0, 8.0, 3.0, 9.0], [5.0, 8.0, 3.0, 3.0, 3.0, 1.0, 7.0, 1.0, 5.0], [2.0, 9.0, 2.0, 2.0, 4.0, 3.0, 8.0, 4.0, 8.0], [7.0, 2.0, 6.0, 6.0, 7.0, 6.0, 2.0, 5.0, 7.0], [6.0, 8.0, 4.0, 4.0, 9.0, 4.0, 5.0, 2.0, 6.0], [5.0, 6.0, 5.0, 5.0, 8.0, 9.0, 4.0, 2.0, 1.0], [3.0, 1.0, 8.0, 8.0, 4.0, 7.0, 5.0, 4.0, 7.0], [4.0, 10.0, 4.0, 4.0, 3.0, 6.0, 5.0, 7.0, 8.0], [3.0, 5.0, 7.0, 7.0, 3.0, 1.0, 1.0, 7.0, 9.0], [5.0, 6.0, 2.0, 2.0, 1.0, 9.0, 6.0, 2.0, 7.0], [6.0, 6.0, 7.0, 7.0, 1.0, 3.0, 1.0, 8.0, 6.0], [2.0, 7.0, 8.0, 8.0, 6.0, 7.0, 5.0, 2.0, 4.0], [1.0, 4.0, 10.0, 10.0, 7.0, 8.0, 4.0, 8.0, 5.0], [10.0, 3.0, 3.0, 3.0, 5.0, 3.0, 4.0, 8.0, 2.0]]
# y_pred = []
# 三家云厂商、3种类型的VM，每种类型的VM租用两台
pri_pro1 = [0.023, 0.0464, 0.0928]
pri_pro2 = [0.0246, 0.0493, 0.0739]
pri_pro3 = [0.1053, 0.1244, 0.1373]
price = pri_pro1 + pri_pro2 + pri_pro3

PRICE={'a1': 0.023, 'a2':0.0464, 'a3': 0.928,
        'h1': 0.023, 'h2':0.0493, 'h3': 0.0739,
        't1': 0.1053, 't2': 0.1244, 't3': 0.1373}


V = ['a', 'h', 't']

color = {'CyberShake': 0, 'Genome': 1,
             'LIGO': 2, 'Montage': 3,
             'Sipht': 4}